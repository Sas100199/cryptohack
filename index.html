<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VOID_SYSTEMS</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Creepster&family=Fira+Code:wght@300&family=Nosifer&display=swap"
      rel="stylesheet"
    />

    <!-- 
INSPECT_LOG_01:
The system does not hide the key.
It hides your attention.
-->

    <style>
      :root {
        --blood-red: #880000;
        --dark: #050505;
      }

      body {
        margin: 0;
        background: black;
        color: #eee;
        font-family: "Fira Code", monospace;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
      }

      /* TARGET */
      #user-tag {
        position: fixed;
        top: 20px;
        right: 120px;
        font-family: "Creepster";
        color: var(--blood-red);
        display: none;
      }

      /* HINT BUTTON */
      #hint-btn {
        position: fixed;
        top: 20px;
        right: 20px;
        font-family: "Creepster";
        background: transparent;
        color: #aaa;
        border: 1px solid var(--blood-red);
        padding: 8px 15px;
        cursor: pointer;
        display: none;
      }

      #hint-btn:hover {
        background: var(--blood-red);
        color: white;
      }

      /* SCREENS */
      .screen {
        display: none;
        background: var(--dark);
        padding: 40px;
        border: 1px solid #222;
        box-shadow: 0 0 40px rgba(136, 0, 0, 0.4);
        text-align: center;
        max-width: 800px;
      }

      #main-menu {
        display: block;
      }

      h1 {
        font-family: "Nosifer";
        color: var(--blood-red);
      }

      /* INPUT (HAUNTED) */
      input {
        background: black;
        border: 1px solid var(--blood-red);
        color: #ff2b2b;
        padding: 12px;
        width: 80%;
        text-align: center;
        font-size: 1.2rem;
        letter-spacing: 2px;
        animation: haunt 2s infinite;
      }

      input:focus {
        outline: none;
        animation: glitch 0.25s infinite;
      }

      @keyframes haunt {
        0%,
        100% {
          box-shadow: 0 0 8px rgba(255, 0, 0, 0.3);
        }
        50% {
          box-shadow: 0 0 25px rgba(255, 0, 0, 0.8);
        }
      }

      @keyframes glitch {
        0% {
          transform: translate(0);
        }
        25% {
          transform: translate(-2px, 2px);
        }
        50% {
          transform: translate(2px, -2px);
        }
        75% {
          transform: translate(-1px, 1px);
        }
        100% {
          transform: translate(0);
        }
      }

      /* BUTTONS */
      .btn {
        margin: 10px;
        padding: 12px 30px;
        background: transparent;
        border: 1px solid var(--blood-red);
        color: white;
        font-family: "Creepster";
        font-size: 1.4rem;
        cursor: pointer;
      }

      .btn:hover {
        background: var(--blood-red);
      }

      /* BOX GAME */
      .box-container {
        display: flex;
        gap: 20px;
        justify-content: center;
      }

      .box {
        width: 100px;
        height: 100px;
        border: 2px solid var(--blood-red);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        cursor: pointer;
        animation: drift 1.5s infinite alternate;
      }

      @keyframes drift {
        from {
          transform: translateX(0);
        }
        to {
          transform: translateX(10px);
        }
      }

      /* SCARE */
      #scare-overlay {
        position: fixed;
        inset: 0;
        background: black;
        display: none;
        z-index: 9999;
      }
    </style>
  </head>

  <body>
    <audio id="bg" loop>
      <source src="https://www.soundjay.com/nature/sounds/wind-howl-01.mp3" />
    </audio>

    <audio
      id="whisper"
      src="https://www.soundjay.com/human/whisper-01.mp3"
    ></audio>

    <div id="user-tag">TARGET: <span id="target-name"></span></div>
    <button id="hint-btn" onclick="giveHint()">HINT</button>

    <!-- MAIN -->
    <div id="main-menu" class="screen">
      <h1>THE_VOID</h1>
      <p>Type your name.</p>
      <input id="name-input" placeholder="SUBJECT_NAME" />
      <br />
      <button class="btn" onclick="initHub()">ENTER</button>
    </div>

    <!-- HUB -->
    <div id="hub" class="screen">
      <h1>SELECT_TRIAL</h1>
      <button class="btn" onclick="showGame('hack')">HACKER_PROTOCOL</button>
      <button class="btn" onclick="showGame('box')">BLIND_CHOICE</button>
    </div>

    <!-- HACK -->
    <div id="hack" class="screen">
      <h1>HACKER_PROTOCOL</h1>
      <input id="hack-input" placeholder="key_xxxx" />
      <button class="btn" onclick="checkHack()">DECRYPT</button>
      <p>ATTEMPTS: <span id="hack-attempts"></span></p>

      <!--
    INSPECT_LOG_02:
    Strings rot when exposed to light.
    --></div>

    <!-- BOX -->
    <div id="box" class="screen">
      <h1>BLIND_CHOICE</h1>
      <div class="box-container">
        <div class="box" onclick="checkBox()">?</div>
        <div class="box" onclick="checkBox()">?</div>
        <div class="box" onclick="checkBox()">?</div>
      </div>
    </div>

    <div id="scare-overlay">
      <div id="video"></div>
    </div>

    <script>
      console.log("%cINSPECT_LOG_03", "color:red;font-size:14px");
      console.log("The key is already on this page.");
      console.log("Lowercase matters.");

      // Obfuscated hint
      const _k = atob("a2V5X3NoYWRv");

      // GAME STATE
      let key = _k + Math.random().toString(36).slice(2, 4);
      let attempts = 2;
      let chance = 0.3;
      let hintUses = 0;

      // HAUNTED INPUT
      document.getElementById("name-input").addEventListener("input", (e) => {
        if (Math.random() < 0.15) {
          e.target.value = e.target.value.replace(/./g, (c) =>
            Math.random() < 0.2 ? "#" : c,
          );
        }
      });

      // WHISPERS
      document.addEventListener("keydown", () => {
        if (Math.random() < 0.05) {
          document.getElementById("whisper").play();
        }
      });

      function show(id) {
        document
          .querySelectorAll(".screen")
          .forEach((s) => (s.style.display = "none"));
        document.getElementById(id).style.display = "block";
      }

      function initHub() {
        const n = document.getElementById("name-input").value;
        if (!n) return;

        document.getElementById("bg").play();
        document.getElementById("target-name").innerText = n.toUpperCase();
        document.getElementById("user-tag").style.display = "block";
        document.getElementById("hint-btn").style.display = "block";
        show("hub");
      }

      function showGame(g) {
        if (g === "hack") {
          document.getElementById("hack-attempts").innerText = attempts;
          show("hack");
        } else show("box");
      }

      function giveHint() {
        hintUses++;

        if (hintUses > 2) {
          chance -= 0.1;
          attempts--;
        }

        const lies = [
          "The key is longer.",
          "Ignore inspect.",
          "Uppercase matters.",
          "You already failed.",
        ];

        const truths = [
          "Inspect the source.",
          "Console whispers.",
          "Base64 hides sins.",
        ];

        alert(
          Math.random() < 0.5
            ? lies[Math.floor(Math.random() * lies.length)]
            : truths[Math.floor(Math.random() * truths.length)],
        );
      }

      function checkHack() {
        const v = document.getElementById("hack-input").value.trim();
        attempts--;
        document.getElementById("hack-attempts").innerText = attempts;

        if (v === key) {
          triggerScare(); // winning is punished
          return;
        }

        if (attempts <= 0) triggerScare();
      }

      function checkBox() {
        if (Math.random() < chance) {
          chance -= 0.15;
          show("hub");
        } else triggerScare();
      }

       function triggerScare() {
    const horrorGifs = [
      "https://media.giphy.com/media/xT9IgvEOwRzUcZDRiU/giphy.gif",
      "https://media.giphy.com/media/3o7aD2saalBwwftBIY/giphy.gif",
      "https://media.giphy.com/media/l0MYC0LajbaPoEADu/giphy.gif",
      "https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.gif",
      "https://media.giphy.com/media/5xtDarIELDLO7lSFQJi/giphy.gif"
    ];

    const randomGif =
      horrorGifs[Math.floor(Math.random() * horrorGifs.length)];

    document.getElementById("scare-overlay").style.display = "block";

    document.getElementById("video").innerHTML = `
      <img src="${randomGif}"
        style="
          width:100vw;
          height:100vh;
          object-fit:cover;
          filter: contrast(120%) saturate(120%);
        "
      />
    `;

    document.documentElement.requestFullscreen?.();
  }
    </script>
  </body>
</html>
